<?xml version="1.0" encoding="UTF-8"?>
<launch>
  <arg name="param_path" default="$(find-pkg-share mask2former)/config/mask2former.param.yaml"/>
  <arg name="onnx_path" default="$(find-pkg-share mask2former)/data/mask2former_r50_8xb2-90k_cityscapes-static-512x1024.onnx"/>

  <arg name="input/image" default="input/image"/>
  <arg name="output/mask" default="output/mask"/>
  <arg name="use_raw" default="false"/>
  <arg name="build_only" default="false"/>

  <arg name="visualize" default="true"/>

  <node pkg="mmros" exec="mmros_semantic_segmentation2d_exe" name="mask2former" output="screen">
    <param from="$(var param_path)" allow_substs="true"/>
    <param name="onnx_path" value="$(var onnx_path)"/>
    <remap from="~/input/image" to="$(var input/image)"/>
    <remap from="~/output/mask" to="$(var output/mask)"/>
    <param name="use_raw" value="$(var use_raw)"/>
    <param name="build_only" value="$(var build_only)"/>
  </node>

  <node pkg="mmrviz" exec="segmentation2d_visualizer_exe" output="screen" if="$(var visualize)">
    <param name="use_raw" value="$(var use_raw)"/>
    <remap from="~/input/image" to="$(var input/image)"/>
    <remap from="~/input/mask" to="$(var output/mask)"/>
  </node>
</launch>
